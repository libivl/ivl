FIND_PACKAGE(clapack QUIET)

IF(clapack_FOUND)
	#SET (USE_LAPACK 1 CACHE BOOL "Use lapack")
	set (LAPACK_TARGETS ${clapack_LIBS})
	set (LAPACKIVL_INCLUDE_DIRS ${clapack_INCLUDE_DIRS})
	set (LAPACKIVL_LIBS ${clapack_LIBS})
ELSE(clapack_FOUND)
	set (clapack_DIR CACHE INTERNAL "")
	#set (LAPACK_TARGETS lapack)

	FIND_LIBRARY(LAPACK_PATH lapack)
	string(COMPARE NOTEQUAL "${LAPACK_PATH}" "LAPACK_PATH-NOTFOUND" WASFOUND)
	if(WASFOUND)
		get_filename_component(LAPACKIVL_LIB_DIR "${LAPACK_PATH}" PATH)
		set (LAPACK_TARGETS "-L${LAPACKIVL_LIB_DIR} -llapack")
		#SET (USE_LAPACK 1 CACHE BOOL "Use lapack")
		set (LAPACKIVL_INCLUDE_DIRS)
		set (LAPACKIVL_LIBS ${LAPACK_TARGETS})
	else(WASFOUND)
		FIND_PACKAGE(LAPACKIVL)
		IF(LAPACKIVL_FOUND)
			set (LAPACK_TARGETS ${LAPACKIVL_LIBS})
			#SET (USE_LAPACK 1 CACHE BOOL "Use lapack")
		ELSE(LAPACKIVL_FOUND)
			set (lapack_not_found 1)
			#set (use_lapack 0 CACHE INTERNAL "")
		endif(LAPACKIVL_FOUND)
	ENDIF(WASFOUND)
ENDIF(clapack_FOUND)
